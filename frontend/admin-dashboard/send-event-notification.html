<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Send Event Notification ‚Äî Event Ease</title>

		<!-- Bootstrap -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>

		<!-- Global styles -->
		<link rel="stylesheet" href="../style.css" />
		<link rel="stylesheet" href="admin-common.css" />

		<style>
			body {
				background: var(--bg-light);
				color: var(--text-dark);
				font-family: Inter, system-ui, Arial;
			}
			.page-wrap {
				max-width: 1200px;
				margin: 0 auto;
				padding: 32px;
			}
			.header-box {
				background: var(--bg-surface);
				border-radius: var(--card-radius);
				border: 1px solid var(--border);
				box-shadow: var(--shadow-sm);
				padding: 24px 32px;
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 28px;
			}
			.notification-preview {
				border: 1px solid var(--border);
				border-radius: 12px;
				padding: 16px;
				background: #f9fafb;
			}
			.preview-header {
				display: flex;
				justify-content: space-between;
				font-size: 13px;
				color: var(--muted);
				margin-bottom: 8px;
			}
			.preview-title {
				font-weight: 600;
				margin-bottom: 4px;
			}
			.preview-message {
				font-size: 14px;
				color: #374151;
			}
		</style>
	</head>

	<body>
		<!-- TOPBAR -->
		<header class="topbar">
			<a
				class="d-flex align-items-center text-decoration-none"
				href="admin.html"
			>
				<div class="logo"><img src="../logo.svg" alt="EE" /></div>
				<div
					style="
						margin-left: 10px;
						font-weight: 700;
						color: var(--text-dark);
					"
				>
					Event Ease
				</div>
			</a>
		</header>

		<main>
			<!-- HEADER -->
			<div class="header-box">
				<div>
					<h2 class="mb-1">üì¢ Send Event Notification</h2>
					<p class="muted mb-0">
						Send announcements or updates to participants of this
						event
					</p>
				</div>
				<button
					class="btn-modern btn-outline-modern"
					onclick="goBack()"
				>
					‚Üê Back to Event Details
				</button>
			</div>

			<div class="page-wrap">
				<!-- EVENT CONTEXT -->
				<div class="card-enhanced mb-4">
					<div class="muted small">Event</div>
					<h4 id="eventName" class="fw-bold mb-1">Event Name</h4>
					<div class="small muted">
						Event ID: <span id="eventId"></span>
					</div>
				</div>

				<form id="eventNotificationForm" class="row g-4">
					<!-- STEP 1 -->
					<div class="col-12">
						<div class="card-enhanced">
							<h5 class="fw-bold mb-3">
								<span class="step-number">1</span> Audience
							</h5>
							<select class="form-select">
								<option>All Participants</option>
								<option>Approved Participants</option>
								<option>Pending Approval</option>
								<option>Team Leaders</option>
								<option>Event Coordinators</option>
							</select>
							<div class="alert alert-info mt-3 mb-0">
								This notification is restricted to this event
								only.
							</div>
						</div>
					</div>

					<!-- STEP 2 -->
					<div class="col-lg-7">
						<div class="card-enhanced h-100">
							<h5 class="fw-bold mb-3">
								<span class="step-number">2</span> Compose
								Message
							</h5>

							<label class="form-label fw-semibold">
								Notification Title
							</label>
							<input
								type="text"
								class="form-control mb-3"
								id="notifTitle"
								placeholder="Venue changed for tomorrow"
								required
							/>

							<label class="form-label fw-semibold">
								Message Content
							</label>
							<textarea
								class="form-control"
								rows="5"
								id="notifMessage"
								required
							></textarea>

							<div class="d-flex justify-content-between mt-2">
								<small class="muted">Max 500 characters</small>
								<small class="muted">
									<span id="charCount">0</span>/500
								</small>
							</div>

							<label class="form-label fw-semibold mt-3">
								Priority
							</label>
							<select class="form-select" id="notifPriority">
								<option value="low">üü¢ Low</option>
								<option value="medium" selected>
									üü° Medium
								</option>
								<option value="high">üî¥ High</option>
							</select>
						</div>
					</div>

					<!-- STEP 3 -->
					<div class="col-lg-5">
						<div class="card-enhanced h-100">
							<h5 class="fw-bold mb-3">
								<span class="step-number">3</span> Preview
							</h5>

							<div class="notification-preview">
								<div class="preview-header">
									<span>üîî Event Notification</span>
									<span>Just now</span>
								</div>
								<div class="preview-title" id="previewTitle">
									Notification Title
								</div>
								<div
									class="preview-message"
									id="previewMessage"
								>
									Message preview will appear here.
								</div>
								<div class="mt-2">
									<span
										id="previewPriority"
										class="badge bg-warning text-dark"
									>
										üü° Medium
									</span>
								</div>
							</div>

							<div class="mt-3 small muted">
								<strong>Will be sent to:</strong><br />
								Event participants only
							</div>
						</div>
					</div>

					<!-- ACTIONS -->
					<div class="col-12">
						<div class="d-flex justify-content-end gap-2">
							<button
								type="button"
								class="btn-modern btn-outline-modern"
								onclick="goBack()"
							>
								Cancel
							</button>
							<button
								type="submit"
								class="btn-modern btn-primary-modern"
							>
								üì§ Send Notification
							</button>
						</div>
					</div>
				</form>
			</div>
		</main>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

		<script>
			const params = new URLSearchParams(window.location.search);
			const eventId = params.get("id") || "E101";
			const eventName = params.get("name") || "Ideathon-2025";

			document.getElementById("eventId").textContent = eventId;
			document.getElementById("eventName").textContent = eventName;

			const titleInput = document.getElementById("notifTitle");
			const msgInput = document.getElementById("notifMessage");
			const priorityInput = document.getElementById("notifPriority");

			titleInput.addEventListener("input", updatePreview);
			msgInput.addEventListener("input", updatePreview);
			priorityInput.addEventListener("change", updatePreview);

			function updatePreview() {
				document.getElementById("previewTitle").textContent =
					titleInput.value || "Notification Title";
				document.getElementById("previewMessage").textContent =
					msgInput.value || "Message preview will appear here.";
				document.getElementById("charCount").textContent =
					msgInput.value.length;

				const badge = document.getElementById("previewPriority");
				if (priorityInput.value === "high") {
					badge.className = "badge bg-danger";
					badge.textContent = "üî¥ High";
				} else if (priorityInput.value === "low") {
					badge.className = "badge bg-success";
					badge.textContent = "üü¢ Low";
				} else {
					badge.className = "badge bg-warning text-dark";
					badge.textContent = "üü° Medium";
				}
			}

			document
				.getElementById("eventNotificationForm")
				.addEventListener("submit", (e) => {
					e.preventDefault();
					alert("Event notification sent and logged successfully.");
					window.location.href = "notification-logs.html";
				});

			function goBack() {
				window.location.href = `event-details.html?id=${eventId}`;
			}
		</script>
	</body>
</html>
