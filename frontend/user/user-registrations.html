<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Event Ease ‚Äî My Registrations (Student)</title>

		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="../style.css" />

		<style>
			:root {
				--header-h: 64px;
			}
			.topbar {
				height: var(--header-h);
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 0 20px;
				background: #fff;
				border-bottom: 1px solid var(--border);
			}
			.app-shell {
				display: flex;
				min-height: calc(100vh - var(--header-h));
			}
			.app-sidebar {
				width: 220px;
				background: linear-gradient(180deg, #0b1220, #071028);
				color: #fff;
				padding: 18px;
				display: flex;
				flex-direction: column;
			}
			.app-main {
				flex: 1;
				padding: 22px;
			}
			.card-compact {
				background: var(--bg-surface);
				border-radius: 10px;
				padding: 16px;
				border: 1px solid var(--border);
			}
			.muted {
				color: var(--text-muted);
			}
			@media (max-width: 900px) {
				.app-sidebar {
					display: none;
				}
			}
		</style>
	</head>
	<body>
		<header class="topbar">
			<a
				href="user-home.html"
				class="d-flex align-items-center text-decoration-none"
			>
				<div
					class="logo-mark"
					style="
						width: 36px;
						height: 36px;
						border-radius: 8px;
						background: linear-gradient(180deg, #3b82f6, #2b6ee6);
						display: grid;
						place-items: center;
						color: #fff;
					"
				>
					EE
				</div>
				<div style="margin-left: 10px; font-weight: 700">
					Event Ease
				</div>
			</a>
			<div class="d-flex align-items-center gap-3">
				<div class="muted">My registrations</div>
			</div>
		</header>

		<div class="app-shell">
			<aside class="app-sidebar d-none d-lg-flex">
				<nav style="display: flex; flex-direction: column; gap: 10px">
					<a href="user-home.html" class="text-white-95 p-2 rounded"
						>üè† Home</a
					>
					<a href="user-events.html" class="text-white-95 p-2 rounded"
						>üìÖ Browse Events</a
					>
					<a
						href="user-registrations.html"
						class="text-white-95 p-2 rounded active"
						>üìã My Registrations</a
					>
				</nav>
			</aside>

			<main class="app-main">
				<div class="card-compact">
					<h5 class="mb-2">Your registrations</h5>
					<div id="regsList" class="muted small">Loading...</div>
				</div>
			</main>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
		<script>
			/* For demo we reuse the EVENTS array from other pages; make local copy to keep standalone */
			const EVENTS = [
				{
					id: "E101",
					name: "Inter-College Hackathon",
					requiresApproval: true,
				},
				{ id: "E102", name: "Food Fest", requiresApproval: false },
				{ id: "E103", name: "Design Sprint", requiresApproval: false },
			];
			/* registrations persisted here in-memory. In a real app these would be fetched from backend */
			let registrations = [
				{
					regId: "R100",
					eventId: "E101",
					status: "pending",
					createdAt: "2025-11-20T10:00:00Z",
				},
				{
					regId: "R101",
					eventId: "E102",
					status: "approved",
					createdAt: "2025-11-21T11:00:00Z",
				},
			];

			function renderRegs() {
				const box = document.getElementById("regsList");
				box.innerHTML = "";
				if (registrations.length === 0) {
					box.innerHTML =
						'<div class="muted">No registrations yet.</div>';
					return;
				}
				registrations.forEach((r) => {
					const e = EVENTS.find((x) => x.id === r.eventId) || {
						name: r.eventId,
					};
					const row = document.createElement("div");
					row.className =
						"d-flex justify-content-between align-items-center mb-2";
					row.innerHTML = `<div><div style="font-weight:600">${
						e.name
					}</div><div class="muted small">${r.regId} ‚Ä¢ ${new Date(
						r.createdAt
					).toLocaleString()}</div></div>
      <div class="text-end">
        <div class="small muted mb-1">${r.status.toUpperCase()}</div>
        <div>
          <button class="btn btn-sm btn-outline me-1" onclick="viewReg('${
				r.regId
			}')">View</button>
          <button class="btn btn-sm btn-danger" onclick="cancelReg('${
				r.regId
			}')">Cancel</button>
        </div>
      </div>`;
					box.appendChild(row);
				});
			}

			function viewReg(regId) {
				const r = registrations.find((x) => x.regId === regId);
				const e = EVENTS.find((x) => x.id === r.eventId);
				alert(
					`${e.name}\nRegistration ID: ${r.regId}\nStatus: ${
						r.status
					}\nRequested: ${new Date(r.createdAt).toLocaleString()}`
				);
			}

			function cancelReg(regId) {
				if (!confirm("Cancel this registration?")) return;
				registrations = registrations.filter((r) => r.regId !== regId);
				alert(
					"Registration canceled (demo). Teacher notified if needed."
				);
				renderRegs();
			}

			renderRegs();
		</script>
	</body>
</html>
