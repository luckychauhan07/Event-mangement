<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Event Details ‚Äî Event Ease</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="./user-style.css" />
	<style>
		.app-main {
			flex: 1;
			padding: 40px;
			overflow-y: auto;
			background: var(--bg-light);
		}

		/* Enhanced Card Design */
		.card-enhanced {
			background: var(--bg-surface);
			border-radius: 16px;
			padding: 28px;
			box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04),
				0 4px 12px rgba(0, 0, 0, 0.04);
			border: 1px solid rgba(0, 0, 0, 0.03);
			transition: all 0.2s;
		}

		.card-enhanced:hover {
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06),
				0 8px 24px rgba(0, 0, 0, 0.06);
		}

		/* Hero Card */
		.hero-card {
			background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
			color: var(--text-dark);
			border-radius: 20px;
			padding: 40px;
			margin-bottom: 32px;
			box-shadow: 0 4px 20px rgba(59, 130, 246, 0.1);
			border: 1px solid rgba(59, 130, 246, 0.1);
			position: relative;
			overflow: hidden;
		}

		.hero-card::before {
			content: "";
			position: absolute;
			top: -50%;
			right: -20%;
			width: 400px;
			height: 400px;
			background: rgba(59, 130, 246, 0.03);
			border-radius: 50%;
		}

		.hero-content {
			position: relative;
			z-index: 1;
		}

		.hero-title {
			font-size: 2.5rem;
			font-weight: 800;
			margin-bottom: 12px;
			color: var(--primary-dark);
		}

		.hero-subtitle {
			font-size: 1.1rem;
			color: var(--text-muted);
			margin-bottom: 24px;
		}

		/* Badges */
		.badge-custom {
			display: inline-flex;
			align-items: center;
			padding: 8px 16px;
			border-radius: 20px;
			font-weight: 600;
			font-size: 0.875rem;
			gap: 6px;
			margin-right: 8px;
			margin-bottom: 8px;
		}

		.badge-technical {
			background: rgba(59, 130, 246, 0.15);
			color: #1e40af;
		}

		.badge-offline {
			background: rgba(16, 185, 129, 0.15);
			color: #065f46;
		}

		.badge-upcoming {
			background: rgba(251, 191, 36, 0.15);
			color: #92400e;
		}

		/* Buttons */
		.btn-modern {
			padding: 12px 24px;
			border-radius: 12px;
			font-weight: 600;
			border: none;
			cursor: pointer;
			transition: all 0.2s;
			display: inline-flex;
			align-items: center;
			gap: 8px;
		}

		.btn-primary-modern {
			background: var(--primary);
			color: white;
			box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
		}

		.btn-primary-modern:hover {
			background: #2563eb;
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
		}

		.btn-outline-modern {
			background: white;
			color: var(--primary);
			border: 2px solid var(--primary);
		}

		.btn-outline-modern:hover {
			background: var(--primary-light);
		}

		.btn-danger-modern {
			background: var(--danger);
			color: white;
		}

		.btn-danger-modern:hover {
			background: #dc2626;
		}

		/* Info Cards */
		.info-section {
			margin-bottom: 20px;
		}

		.info-section h6 {
			font-size: 0.875rem;
			font-weight: 700;
			color: var(--text-muted);
			text-transform: uppercase;
			letter-spacing: 0.05em;
			margin-bottom: 16px;
			display: flex;
			align-items: center;
			gap: 8px;
		}

		.info-row {
			display: flex;
			padding: 14px 0;
			border-bottom: 1px solid #f1f5f9;
		}

		.info-row:last-child {
			border-bottom: none;
		}

		.info-label {
			font-weight: 600;
			color: var(--text-dark);
			min-width: 140px;
			flex-shrink: 0;
		}

		.info-value {
			color: var(--text-muted);
			flex: 1;
		}

		/* Stats Cards */
		.stats-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 20px;
			margin-bottom: 32px;
		}

		.stat-card {
			background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
			padding: 24px;
			border-radius: 16px;
			color: var(--text-dark);
			box-shadow: 0 2px 8px rgba(59, 130, 246, 0.08);
			border: 1px solid rgba(59, 130, 246, 0.1);
		}

		.stat-card:nth-child(2) {
			background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
			border-color: rgba(16, 185, 129, 0.1);
		}

		.stat-card:nth-child(3) {
			background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
			border-color: rgba(251, 191, 36, 0.1);
		}

		.stat-value {
			font-size: 2rem;
			font-weight: 800;
			margin-bottom: 4px;
			color: var(--primary);
		}

		.stat-card:nth-child(2) .stat-value {
			color: var(--success);
		}

		.stat-card:nth-child(3) .stat-value {
			color: #d97706;
		}

		.stat-label {
			font-size: 0.875rem;
			color: var(--text-muted);
			font-weight: 500;
		}

		/* Table */
		.table-modern {
			width: 100%;
			border-collapse: separate;
			border-spacing: 0;
		}

		.table-modern thead th {
			background: var(--bg-light);
			padding: 16px;
			text-align: left;
			font-weight: 600;
			color: var(--text-dark);
			border-bottom: 2px solid var(--border);
			font-size: 0.875rem;
		}

		.table-modern tbody td {
			padding: 16px;
			border-bottom: 1px solid #f1f5f9;
		}

		.table-modern tbody tr:hover {
			background: #fafbfc;
		}

		/* Responsive */
		@media (max-width: 991px) {
			.app-sidebar {
				display: none;
			}

			.app-main {
				padding: 24px;
			}

			.hero-title {
				font-size: 2rem;
			}
		}

		@media (max-width: 576px) {
			.hero-card {
				padding: 24px;
			}

			.card-enhanced {
				padding: 20px;
			}
		}
	</style>
	<link rel="stylesheet" href="admin-common.css" />
</head>

<body>
	<header class="topbar">
		<a href="user-home.html" class="d-flex align-items-center text-decoration-none">
			<div class="logo-mark">EE</div>
			<div style="
						margin-left: 10px;
						font-weight: 700;
						color: var(--text-dark);
					">
				Event Ease
			</div>
		</a>

		<div class="d-flex align-items-center gap-3">
			<input id="searchUserTop" class="form-control form-control-sm d-none d-md-block"
				placeholder="Search events..." style="min-width: 260px" />
			<div class="dropdown">
				<button class="btn d-flex align-items-center gap-2" data-bs-toggle="dropdown">
					<div class="rounded-circle bg-primary text-white" style="
								width: 36px;
								height: 36px;
								display: grid;
								place-items: center;
							">
						ST
					</div>
					<div class="d-none d-md-block text-start">
						<div style="font-weight: 600">Student</div>
						<div class="muted">you@college.edu</div>
					</div>
				</button>
				<ul class="dropdown-menu dropdown-menu-end">
					<li>
						<a class="dropdown-item" href="user-profile.html">Profile</a>
					</li>
					<li>
						<a class="dropdown-item" href="user-registrations.html">My Registrations</a>
					</li>
					<li>
						<hr class="dropdown-divider" />
					</li>
					<li>
						<button class="dropdown-item text-danger" id="userLogout">
							Logout
						</button>
					</li>
				</ul>
			</div>
		</div>
	</header>

	<div class="app-shell">
		<aside class="app-sidebar d-none d-lg-flex">
			<nav class="sidebar-nav">
				<a href="user-home.html">üè† Home</a>
				<a href="user-events.html" class="active">üìÖ Browse Events</a>
				<a href="user-registrations.html">üìã My Registrations</a>
				<a href="user-notification.html">üîî Notifications</a>
				<a href="user-profile.html">üë§ Profile</a>
			</nav>
		</aside>

		<main class="app-main">
			<div class="container-fluid">
				<!-- HERO CARD -->
				<div id="heroCard"></div>

				<!-- STATS -->
				<div id="statsGrid" class="stats-grid"></div>

				<!-- DETAILS GRID -->
				<div id="detailsGrid" class="row g-4"></div>
		</main>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<script>
		const params = new URLSearchParams(window.location.search);
		const eventId = params.get("id");
		console.log("Opened event:", eventId);

		// Dummy Event Data
		const eventData = {
			id: "E101",
			title: "Ideathon-2025",
			subtitle: "Explore innovative minds",
			description: "This event is a 24-hour live coding ideathon.",
			category: "Technical",
			visibility: "Public",
			eventType: "paid",
			entryFee: 200,
			feeMode: "per_person",
			mode: "Offline",
			venue: "B-block",
			rooms: "F-104 Seminar Hall",
			onlineLink: "",
			startAt: "2025-12-21T01:56",
			endAt: "2025-12-22T01:56",
			registrationRequired: "Yes",
			registrationType: "Open",
			regStart: "2025-12-15T01:57",
			regEnd: "2025-12-18T01:57",
			participantLimit: 200,
			teamsEnabled: "Yes",
			teamJoinMode: "Open",
			teamMin: 1,
			teamMax: 4,
			audienceRole: "Students",
			audienceDepartment: "",
			audienceCourse: "",
			ageRestriction: "",
			organizer: "Tech Club",
			primaryCoordinator: "Lucky Chauhan",
			coordEmail: "",
			coordPhone: "",
			catering: "No",
			cateringDetails: "",
			equipment: "",
			securityLevel: "High",
			poster: "problem.jpg",
			promoVideo: "",
			documents: "Object-Oriented-System-Design.pdf",
			participantsEnrolled: 87,
		};

		const ALL_PARTICIPANTS = Array.from({ length: 37 }, (_, i) => ({
			id: "P" + (i + 1),
			name: "Participant " + (i + 1),
			email: "p" + (i + 1) + "@example.com",
		}));

		let currentPage = 1;
		const itemsPerPage = 10;

		// Format date helper
		function formatDate(dateStr) {
			return new Date(dateStr).toLocaleString("en-US", {
				month: "short",
				day: "numeric",
				year: "numeric",
				hour: "numeric",
				minute: "2-digit",
				hour12: true,
			});
		}

		// Calculate duration
		function calculateDuration(start, end) {
			const hours = Math.abs(new Date(end) - new Date(start)) / 36e5;
			return hours >= 24
				? `${Math.round(hours / 24)} days`
				: `${Math.round(hours)} hours`;
		}
		function getEventStatus(ev) {
			const now = new Date();
			const start = new Date(ev.startAt);
			const end = new Date(ev.endAt);

			if (now < start)
				return {
					text: "Upcoming",
					cls: "badge-upcoming",
					icon: "‚è∞",
				};
			if (now >= start && now <= end)
				return {
					text: "Ongoing",
					cls: "badge-offline",
					icon: "üî•",
				};
			return {
				text: "Completed",
				cls: "badge-technical",
				icon: "‚úîÔ∏è",
			};
		}

		function renderHeroCard() {
			const status = getEventStatus(eventData);

			document.getElementById("heroCard").innerHTML = `
		<div class="hero-card">
			<a href="user-events.html" class="btn-modern btn-outline-modern mb-3">
				‚Üê Back to Events
			</a>

			<h1 class="hero-title">${eventData.title}</h1>
			<p class="hero-subtitle">${eventData.subtitle}</p>

			<div class="d-flex gap-2 flex-wrap mt-3">
				<span class="badge-custom badge-technical">üì± ${eventData.category}</span>
				<span class="badge-custom badge-offline">üìç ${eventData.mode}</span>
				<span class="badge-custom ${status.cls}">
					${status.icon} ${status.text}
				</span>
			</div>
		</div>
	`;
		}

		// Render Stats
		function renderStats() {
			const feeText =
				eventData.eventType === "paid"
					? `‚Çπ${eventData.entryFee}`
					: "Free";
			document.getElementById("statsGrid").innerHTML = `
					<div class="stat-card">
						<div class="stat-value">${eventData.participantsEnrolled}</div>
						<div class="stat-label">Registered Participants</div>
					</div>
					<div class="stat-card">
						<div class="stat-value">${eventData.participantLimit}</div>
						<div class="stat-label">Max Allowed</div>
					</div>
					<div class="stat-card">
						<div class="stat-value">${feeText}</div>
						<div class="stat-label">Entry Fee</div>
					</div>
				`;
		}

		// Render Details Grid
		function renderDetailsGrid() {
			const duration = calculateDuration(
				eventData.startAt,
				eventData.endAt
			);
			const regPeriod = `${formatDate(
				eventData.regStart
			)} - ${formatDate(eventData.regEnd)}`;
			const teamInfo =
				eventData.teamsEnabled === "Yes"
					? `${eventData.teamMin} - ${eventData.teamMax} members`
					: "Teams not allowed";

			document.getElementById("detailsGrid").innerHTML = `
					<!-- BASIC INFO -->
					<div class="col-lg-6">
						<div class="card-enhanced h-100">
							<div class="info-section">
								<h6>üìå Basic Information</h6>
								<div class="info-row">
									<div class="info-label">Description</div>
									<div class="info-value">${eventData.description}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Category</div>
									<div class="info-value">${eventData.category}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Visibility</div>
									<div class="info-value">${eventData.visibility}</div>
								</div>
							</div>
						</div>
					</div>

					<!-- DATE & TIME -->
					<div class="col-lg-6">
						<div class="card-enhanced h-100">
							<div class="info-section">
								<h6>üïí Date & Time</h6>
								<div class="info-row">
									<div class="info-label">Start Date</div>
									<div class="info-value">${formatDate(eventData.startAt)}</div>
								</div>
								<div class="info-row">
									<div class="info-label">End Date</div>
									<div class="info-value">${formatDate(eventData.endAt)}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Duration</div>
									<div class="info-value">${duration}</div>
								</div>
							</div>
						</div>
					</div>

					<!-- VENUE -->
					<div class="col-lg-6">
						<div class="card-enhanced h-100">
							<div class="info-section">
								<h6>üìç Venue Details</h6>
								<div class="info-row">
									<div class="info-label">Mode</div>
									<div class="info-value">${eventData.mode}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Venue</div>
									<div class="info-value">${eventData.venue || "N/A"}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Room</div>
									<div class="info-value">${eventData.rooms || "N/A"}</div>
								</div>
							</div>
						</div>
					</div>

					<!-- REGISTRATION -->
					<div class="col-lg-6">
						<div class="card-enhanced h-100">
							<div class="info-section">
								<h6>üìù Registration</h6>
								<div class="info-row">
									<div class="info-label">Required</div>
									<div class="info-value">${eventData.registrationRequired}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Type</div>
									<div class="info-value">${eventData.registrationType}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Registration Period</div>
									<div class="info-value">${regPeriod}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Participant Limit</div>
									<div class="info-value">${eventData.participantLimit}</div>
								</div>
							</div>
						</div>
					</div>

					<!-- TEAM -->
					<div class="col-lg-6">
						<div class="card-enhanced h-100">
							<div class="info-section">
								<h6>üë• Team Participation</h6>
								<div class="info-row">
									<div class="info-label">Teams Enabled</div>
									<div class="info-value">${eventData.teamsEnabled}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Team Size</div>
									<div class="info-value">${teamInfo}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Join Mode</div>
									<div class="info-value">${eventData.teamJoinMode}</div>
								</div>
							</div>
						</div>
					</div>

					<!-- ORGANIZER -->
					<div class="col-lg-6">
						<div class="card-enhanced h-100">
							<div class="info-section">
								<h6>üè´ Organizer</h6>
								<div class="info-row">
									<div class="info-label">Organization</div>
									<div class="info-value">${eventData.organizer}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Coordinator</div>
									<div class="info-value">${eventData.primaryCoordinator}</div>
								</div>
								<div class="info-row">
									<div class="info-label">Security Level</div>
									<div class="info-value">${eventData.securityLevel}</div>
								</div>
							</div>
						</div>
					</div>
				`;
		}

		function renderParticipants(page) {
			const start = (page - 1) * itemsPerPage;
			const end = start + itemsPerPage;
			const pageData = ALL_PARTICIPANTS.slice(start, end);

			const tbody = document.getElementById("participantsBody");
			tbody.innerHTML = pageData
				.map(
					(p) => `
					<tr>
						<td>${p.id}</td>
						<td>${p.name}</td>
						<td>${p.email}</td>
					</tr>
				`
				)
				.join("");

			const totalPages = Math.ceil(
				ALL_PARTICIPANTS.length / itemsPerPage
			);
			document.getElementById("participantsPagination").innerHTML = `
					<div>${ALL_PARTICIPANTS.length} participants</div>
					<div class="d-flex gap-2 align-items-center">
						<button class="btn btn-sm btn-outline-secondary" ${page === 1 ? "disabled" : ""
				} onclick="changePage(-1)">‚Üê Prev</button>
						<span>Page ${page} of ${totalPages}</span>
						<button class="btn btn-sm btn-outline-secondary" ${page === totalPages ? "disabled" : ""
				} onclick="changePage(1)">Next ‚Üí</button>
					</div>
				`;
		}

		// Initialize page
		function initializePage() {
			renderHeroCard();
			renderStats();
			renderDetailsGrid();

			// Attach event listeners after rendering
			document.getElementById("editBtn").onclick = () => {
				window.location.href = `add-event.html?id=${eventData.id}`;
			};

			document.getElementById("assignBtn").onclick = () => {
				window.location.href = `assign.html?id=${eventData.id}`;
			};

			document.getElementById("deleteBtn").onclick = () => {
				new bootstrap.Modal(
					document.getElementById("confirmModal")
				).show();
			};

			document.getElementById("confirmYes").onclick = () => {
				alert("Event deleted successfully!");
				window.location.href = "events.html";
			};

			document.getElementById("viewParticipantsBtn").onclick = () => {
				const card = document.getElementById("participantsCard");
				const btn = document.getElementById("viewParticipantsBtn");

				const isHidden = card.style.display === "none";
				card.style.display = isHidden ? "block" : "none";
				btn.textContent = isHidden
					? "Hide Participants"
					: "Show Participants";

				if (isHidden) renderParticipants(currentPage);
			};
		}

		window.changePage = (delta) => {
			currentPage += delta;
			renderParticipants(currentPage);
		};

		// Load page when DOM is ready
		document.addEventListener("DOMContentLoaded", initializePage);

		document.getElementById("year").textContent =
			new Date().getFullYear();
	</script>
</body>

</html>

