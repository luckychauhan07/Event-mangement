<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Event Ease ‚Äî Student Coordinator Events</title>

		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="../style.css" />

		<style>
			body {
				font-family: Inter, system-ui, Arial;
				background: var(--bg-light);
				color: var(--text-dark);
			}
			.app-shell {
				display: flex;
				min-height: calc(100vh - var(--header-height));
			}
			.app-sidebar {
				width: var(--sidebar-width);
				background: linear-gradient(180deg, var(--sidebar-gradient-start), var(--sidebar-gradient-end));
				color: #fff;
				padding: 28px 20px;
				display: flex;
				flex-direction: column;
				box-shadow: var(--shadow-md);
			}
			.app-main {
				flex: 1;
				padding: 32px;
			}
			@media (max-width: 991px) {
				.app-sidebar {
					display: none;
				}
				.app-main {
					padding: 24px;
				}
			}
		</style>
	</head>
	<body>
		<header class="topbar">
			<a
				class="d-flex align-items-center text-decoration-none"
				href="sc-home.html"
			>
				<div class="logo-mark">EE</div>
				<div style="margin-left: 10px; font-weight: 700; color: var(--text-dark);">
					Event Ease
				</div>
			</a>

			<div class="d-flex align-items-center gap-3">
				<input
					id="scEvtSearch"
					class="form-control form-control-sm d-none d-md-block"
					style="min-width: 260px"
					placeholder="Search assigned events"
				/>
				<div class="dropdown">
					<button
						class="btn d-flex align-items-center gap-2"
						data-bs-toggle="dropdown"
					>
						<div
							class="rounded-circle bg-primary text-white"
							style="
								width: 36px;
								height: 36px;
								display: grid;
								place-items: center;
							"
						>
							SC
						</div>
					</button>
					<ul class="dropdown-menu dropdown-menu-end">
						<li>
							<a class="dropdown-item" href="sc-home.html"
								>Home</a
							>
						</li>
					</ul>
				</div>
			</div>
		</header>

		<div class="app-shell">
			<aside class="app-sidebar d-none d-lg-flex">
				<nav class="sidebar-nav">
					<a href="sc-home.html"
						>üè† Home</a
					>
					<a
						href="sc-events.html"
						class="active"
						>üìÖ My Events</a
					>
					<a href="sc-roster.html"
						>üìã Rosters</a
					>
				</nav>
			</aside>

			<main class="app-main">
				<div
					class="d-flex justify-content-between align-items-center mb-3"
				>
					<div>
						<h4 class="mb-0">My Events</h4>
						<div class="muted">
							Events where you're listed as student coordinator
						</div>
					</div>
					<div class="d-flex gap-2">
						<select
							id="filterStatus"
							class="form-select form-select-sm"
						>
							<option value="all">All</option>
							<option value="upcoming">Upcoming</option>
							<option value="ongoing">Ongoing</option>
						</select>
						<button
							class="btn btn-outline btn-sm"
							id="btnExportAll"
						>
							Export All
						</button>
					</div>
				</div>

				<div class="card-compact">
					<div class="table-responsive">
						<table class="table align-middle">
							<thead>
								<tr>
									<th>Event</th>
									<th>Date</th>
									<th>Venue</th>
									<th>Participants</th>
									<th>Status</th>
									<th class="text-end">Actions</th>
								</tr>
							</thead>
							<tbody id="scEventsTbody"></tbody>
						</table>
					</div>
				</div>
			</main>
		</div>

		<!-- Roster & attendance modals reused from previous file via same ids if opened separately -->
		<div class="modal fade" id="rosterModalSmall" tabindex="-1">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Roster</h5>
						<button
							class="btn-close"
							data-bs-dismiss="modal"
						></button>
					</div>
					<div class="modal-body" id="rosterModalSmallBody"></div>
					<div class="modal-footer">
						<button class="btn btn-outline" data-bs-dismiss="modal">
							Close
						</button>
					</div>
				</div>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
		<script>
			const SC_ID = "SC01";
			const allEvents = [
				{
					id: "E101",
					name: "Hackathon ‚Äî Team Coordination",
					date: "2025-12-05T10:00",
					venue: "Auditorium A",
					requiresApproval: true,
					teamParticipation: true,
					scAssigned: SC_ID,
					participants: ["S101", "S102", "S103"],
				},
				{
					id: "E102",
					name: "Design Sprint",
					date: "2025-12-12T09:00",
					venue: "Lab 101",
					requiresApproval: false,
					teamParticipation: true,
					scAssigned: SC_ID,
					participants: ["S106", "S107"],
				},
			];

			function render() {
				const tbody = document.getElementById("scEventsTbody");
				tbody.innerHTML = "";
				const q = (
					document.getElementById("scEvtSearch").value || ""
				).toLowerCase();
				const st = document.getElementById("filterStatus").value;
				const list = allEvents
					.filter((e) => e.scAssigned === SC_ID)
					.filter((e) => {
						if (st !== "all") {
							if (
								st === "upcoming" &&
								new Date(e.date) <= new Date()
							)
								return false;
							if (
								st === "ongoing" &&
								new Date(e.date) > new Date()
							)
								return false;
						}
						if (
							q &&
							!(e.name + " " + e.id + " " + e.venue)
								.toLowerCase()
								.includes(q)
						)
							return false;
						return true;
					});
				list.forEach((ev) => {
					const tr = document.createElement("tr");
					tr.innerHTML = `<td style="font-weight:600">${
						ev.name
					}<div class="small muted">${ev.id}</div></td>
          <td>${new Date(ev.date).toLocaleDateString()}</td>
          <td>${ev.venue}</td>
          <td>${ev.participants.length}</td>
          <td><span class="badge ${
				ev.requiresApproval ? "bg-warning text-dark" : "bg-success"
			}">${ev.requiresApproval ? "Requires approval" : "Auto"}</span></td>
          <td class="text-end"><button class="btn btn-sm btn-outline me-1" onclick="openRoster('${
				ev.id
			}')">Roster</button><button class="btn btn-sm btn-primary" onclick="exportRoster('${
						ev.id
					}')">Export</button></td>`;
					tbody.appendChild(tr);
				});
			}

			function openRoster(id) {
				const ev = allEvents.find((e) => e.id === id);
				const body = document.getElementById("rosterModalSmallBody");
				body.innerHTML = "";
				ev.participants.forEach((pid) => {
					const div = document.createElement("div");
					div.className =
						"d-flex justify-content-between align-items-center mb-2";
					div.innerHTML = `<div><strong>${pid}</strong></div><div><button class="btn btn-sm btn-outline" onclick="alert('view participant (demo)')">View</button></div>`;
					body.appendChild(div);
				});
				new bootstrap.Modal(
					document.getElementById("rosterModalSmall")
				).show();
			}

			function exportRoster(id) {
				alert("Export roster (demo) for " + id);
			}

			document
				.getElementById("filterStatus")
				.addEventListener("change", render);
			document
				.getElementById("scEvtSearch")
				.addEventListener("input", render);
			render();
		</script>
	</body>
</html>
